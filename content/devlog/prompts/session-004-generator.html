<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devlog Cover - Part 4: コンテンツ統合</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #0a0e1a; font-family: sans-serif; }
        #coverCanvas { display: block; }
    </style>
</head>
<body>
    <canvas id="coverCanvas" width="1920" height="1080"></canvas>

    <script>
        const canvas = document.getElementById('coverCanvas');
        const ctx = canvas.getContext('2d');
        const W = canvas.width;
        const H = canvas.height;

        const blue = '#4a90d9';
        const cyan = '#00d4ff';
        const amber = '#f59e0b';
        const dimWhite = 'rgba(255,255,255,0.85)';
        const dimGray = 'rgba(180,200,230,0.4)';

        // Background
        ctx.fillStyle = '#0a0e1a';
        ctx.fillRect(0, 0, W, H);

        // Subtle grid
        ctx.strokeStyle = 'rgba(74,144,217,0.06)';
        ctx.lineWidth = 1;
        for (let x = 0; x < W; x += 60) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke(); }
        for (let y = 0; y < H; y += 60) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke(); }

        // Title
        ctx.font = 'bold 78px "Noto Sans JP", "Hiragino Kaku Gothic ProN", sans-serif';
        ctx.fillStyle = cyan;
        ctx.textAlign = 'center';
        ctx.fillText('Part 4: コンテンツ統合', W / 2, 135);

        // Subtitle
        ctx.font = '33px "Noto Sans JP", sans-serif';
        ctx.fillStyle = blue;
        ctx.fillText('2026-02-14', W / 2, 195);

        // Three column layout
        const colW = 525;
        const colGap = 45;
        const totalW = colW * 3 + colGap * 2;
        const startX = (W - totalW) / 2;
        const colY = 255;
        const colH = 525;

        const columns = [
            {
                title: 'Devlogギャラリー',
                color: cyan,
                items: [
                    'sessions.jsonデータ設計',
                    'devlog.js リファクタリング',
                    'card.js Canvas動的生成',
                    'IntersectionObserver遅延初期化',
                ]
            },
            {
                title: '液体エフェクト',
                color: amber,
                items: [
                    'メタボール方式 refraction',
                    'devパネルON/OFF制御',
                    '1テクスチャ方式を採用',
                ]
            },
            {
                title: '開発体制',
                color: blue,
                items: [
                    'Worktree運用ルール策定',
                    '3ブランチ並行開発',
                    'feature/devlog-content',
                    'feature/claude-code',
                    'feature/codex-tasks',
                ]
            }
        ];

        columns.forEach((col, ci) => {
            const x = startX + ci * (colW + colGap);

            // Column background
            ctx.fillStyle = 'rgba(74,144,217,0.06)';
            ctx.strokeStyle = col.color + '33';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.roundRect(x, colY, colW, colH, 12);
            ctx.fill();
            ctx.stroke();

            // Top accent bar
            ctx.fillStyle = col.color;
            ctx.beginPath();
            ctx.roundRect(x, colY, colW, 6, [12, 12, 0, 0]);
            ctx.fill();

            // Column title
            ctx.font = 'bold 30px "Noto Sans JP", sans-serif';
            ctx.fillStyle = col.color;
            ctx.textAlign = 'left';
            ctx.fillText(col.title, x + 30, colY + 60);

            // Column items
            ctx.font = '23px "Noto Sans JP", sans-serif';
            col.items.forEach((item, ii) => {
                const iy = colY + 112 + ii * 63;

                // Bullet
                ctx.beginPath();
                ctx.arc(x + 42, iy - 6, 6, 0, Math.PI * 2);
                ctx.fillStyle = col.color + '80';
                ctx.fill();

                // Text
                ctx.fillStyle = dimWhite;
                ctx.textAlign = 'left';
                ctx.fillText(item, x + 66, iy);
            });
        });

        // Technical decisions bar
        const barY = 825;
        const barH = 180;
        ctx.fillStyle = 'rgba(10,14,26,0.9)';
        ctx.strokeStyle = 'rgba(74,144,217,0.15)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.roundRect(startX, barY, totalW, barH, 12);
        ctx.fill();
        ctx.stroke();

        ctx.font = 'bold 24px "Noto Sans JP", sans-serif';
        ctx.fillStyle = cyan;
        ctx.textAlign = 'left';
        ctx.fillText('技術的なポイント', startX + 30, barY + 45);

        const decisions = [
            'devlogデータ2層構成: sessions.json（メタ）＋ 個別.md（本文）',
            'card.js: カテゴリ別アイコン・ノイズパターンでフォールバック画像を動的生成',
            '液体エフェクト: stash conflictにより1テクスチャ方式を採用',
        ];

        ctx.font = '21px "Noto Sans JP", sans-serif';
        decisions.forEach((d, i) => {
            ctx.fillStyle = amber;
            ctx.fillText('▸', startX + 30, barY + 87 + i * 39);
            ctx.fillStyle = dimWhite;
            ctx.fillText(d, startX + 60, barY + 87 + i * 39);
        });

        // Footer
        ctx.font = '21px "Noto Sans JP", sans-serif';
        ctx.fillStyle = dimGray;
        ctx.textAlign = 'center';
        ctx.fillText('kesson-space devlog — Worktree並行開発体制', W / 2, H - 30);
    </script>
</body>
</html>
