<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devlog Cover - Part 2: UX実装</title>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background-color: #0a0e1a; font-family: sans-serif; }
        #coverCanvas { display: block; }
        #downloadButton {
            position: absolute; top: 10px; right: 10px;
            padding: 8px 16px; background-color: #4a90d9; color: white;
            border: none; cursor: pointer; border-radius: 4px; font-size: 14px;
        }
    </style>
</head>
<body>
    <canvas id="coverCanvas" width="1920" height="1080"></canvas>
    <button id="downloadButton">Download PNG</button>

    <script>
        const canvas = document.getElementById('coverCanvas');
        const ctx = canvas.getContext('2d');
        const W = canvas.width;
        const H = canvas.height;

        const blue = '#4a90d9';
        const cyan = '#00d4ff';
        const amber = '#f59e0b';
        const dimWhite = 'rgba(255,255,255,0.85)';
        const dimGray = 'rgba(180,200,230,0.4)';

        // Background
        ctx.fillStyle = '#0a0e1a';
        ctx.fillRect(0, 0, W, H);

        // Subtle grid
        ctx.strokeStyle = 'rgba(74,144,217,0.06)';
        ctx.lineWidth = 1;
        for (let x = 0; x < W; x += 60) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke(); }
        for (let y = 0; y < H; y += 60) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke(); }

        // Title
        ctx.font = `bold ${78}px "Noto Sans JP", "Hiragino Kaku Gothic ProN", sans-serif`;
        ctx.fillStyle = cyan;
        ctx.textAlign = 'center';
        ctx.fillText('Part 2: UX実装', W / 2, 135);

        // Subtitle
        ctx.font = `${33}px "Noto Sans JP", sans-serif`;
        ctx.fillStyle = blue;
        ctx.fillText('2026-02-12', W / 2, 195);

        // Timeline
        const tlY = 360;
        const tlLeft = 180;
        const tlRight = W - 180;

        ctx.strokeStyle = blue;
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(tlLeft, tlY);
        ctx.lineTo(tlRight, tlY);
        ctx.stroke();

        // Items
        const items = [
            { text: '統一ブレス\nシステム', sub: 'HTML+FOV+Shader同期' },
            { text: 'Bootstrap 5\ndevパネル', sub: '13トグル' },
            { text: 'OrbitControls\n撤廃', sub: 'スクロール駆動ダイブ' },
            { text: 'スクロール駆動\nUI分離', sub: 'scroll-ui.js' },
            { text: 'Gemシェーダー\n探求', sub: 'Sprite→Fresnel orb' },
            { text: 'vmin基準\nレスポンシブ', sub: 'フォント統一' },
            { text: '4エージェント\nレビュー', sub: '品質分析' },
        ];

        const spacing = (tlRight - tlLeft) / (items.length - 1);

        items.forEach((item, i) => {
            const x = tlLeft + i * spacing;
            const above = i % 2 === 0;

            // Dot
            ctx.beginPath();
            ctx.arc(x, tlY, 11, 0, Math.PI * 2);
            ctx.fillStyle = amber;
            ctx.fill();
            ctx.strokeStyle = '#0a0e1a';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Connector line
            const lineLen = above ? -75 : 75;
            ctx.strokeStyle = 'rgba(74,144,217,0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x, tlY + (above ? -15 : 15));
            ctx.lineTo(x, tlY + lineLen);
            ctx.stroke();

            // Text
            const textY = above ? tlY - 98 : tlY + 105;
            const lines = item.text.split('\n');

            ctx.font = `bold ${24}px "Noto Sans JP", sans-serif`;
            ctx.fillStyle = dimWhite;
            ctx.textAlign = 'center';
            lines.forEach((line, li) => {
                ctx.fillText(line, x, textY + li * 30);
            });

            // Sub text
            ctx.font = `${18}px "Noto Sans JP", sans-serif`;
            ctx.fillStyle = dimGray;
            ctx.fillText(item.sub, x, textY + lines.length * 30 + 6);
        });

        // Technical decisions box
        const boxW = 1050;
        const boxH = 270;
        const boxX = (W - boxW) / 2;
        const boxY = 690;

        ctx.fillStyle = 'rgba(74,144,217,0.08)';
        ctx.strokeStyle = 'rgba(74,144,217,0.2)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.roundRect(boxX, boxY, boxW, boxH, 12);
        ctx.fill();
        ctx.stroke();

        // Box title
        ctx.font = `bold ${27}px "Noto Sans JP", sans-serif`;
        ctx.fillStyle = cyan;
        ctx.textAlign = 'left';
        ctx.fillText('技術的決定', boxX + 36, boxY + 52);

        // Box items
        const decisions = [
            'OrbitControls廃止 → ページスクロール非阻害のモバイルファースト設計',
            'vmin単位でフォントサイズ統一（短辺追従）',
            'Gemナビオブジェクトは正三角形配置を採用',
        ];

        ctx.font = `${23}px "Noto Sans JP", sans-serif`;
        decisions.forEach((d, i) => {
            ctx.fillStyle = amber;
            ctx.fillText('▸', boxX + 36, boxY + 105 + i * 52);
            ctx.fillStyle = dimWhite;
            ctx.fillText(d, boxX + 72, boxY + 105 + i * 52);
        });

        // Footer
        ctx.font = `${21}px "Noto Sans JP", sans-serif`;
        ctx.fillStyle = dimGray;
        ctx.textAlign = 'center';
        ctx.fillText('kesson-space devlog — 4エージェントレビュー実施', W / 2, H - 45);

        // Download via html2canvas
        document.getElementById('downloadButton').addEventListener('click', () => {
            html2canvas(canvas, { width: 1920, height: 1080, scale: 1 }).then(c => {
                const link = document.createElement('a');
                link.download = 'session-002.png';
                link.href = c.toDataURL('image/png');
                link.click();
            });
        });
    </script>
</body>
</html>
