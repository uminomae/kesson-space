<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devlog Cover - Part 2: UX実装</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #0a0e1a; font-family: sans-serif; }
        #coverCanvas { display: block; }
        #downloadButton {
            position: absolute; top: 10px; right: 10px;
            padding: 8px 16px; background-color: #4a90d9; color: white;
            border: none; cursor: pointer; border-radius: 4px; font-size: 14px;
        }
    </style>
</head>
<body>
    <canvas id="coverCanvas" width="1280" height="720"></canvas>
    <button id="downloadButton">ダウンロード (PNG)</button>

    <script>
        const canvas = document.getElementById('coverCanvas');
        const ctx = canvas.getContext('2d');
        const W = canvas.width;
        const H = canvas.height;

        const blue = '#4a90d9';
        const cyan = '#00d4ff';
        const amber = '#f59e0b';
        const dimWhite = 'rgba(255,255,255,0.85)';
        const dimGray = 'rgba(180,200,230,0.4)';

        // Background
        ctx.fillStyle = '#0a0e1a';
        ctx.fillRect(0, 0, W, H);

        // Subtle grid
        ctx.strokeStyle = 'rgba(74,144,217,0.06)';
        ctx.lineWidth = 1;
        for (let x = 0; x < W; x += 40) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke(); }
        for (let y = 0; y < H; y += 40) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke(); }

        // Title
        ctx.font = 'bold 52px "Noto Sans JP", "Hiragino Kaku Gothic ProN", sans-serif';
        ctx.fillStyle = cyan;
        ctx.textAlign = 'center';
        ctx.fillText('Part 2: UX実装', W / 2, 90);

        // Subtitle
        ctx.font = '22px "Noto Sans JP", sans-serif';
        ctx.fillStyle = blue;
        ctx.fillText('02-12 〜 02-13', W / 2, 130);

        // Timeline
        const tlY = 240;
        const tlLeft = 120;
        const tlRight = W - 120;

        // Timeline line
        ctx.strokeStyle = blue;
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(tlLeft, tlY);
        ctx.lineTo(tlRight, tlY);
        ctx.stroke();

        // Items
        const items = [
            { text: '統一ブレス\nシステム', sub: 'HTML+FOV+Shader同期' },
            { text: 'Bootstrap 5\ndevパネル', sub: '13トグル' },
            { text: 'OrbitControls\n撤廃', sub: 'スクロール駆動ダイブ' },
            { text: 'モバイルファースト\nスクロール', sub: 'scroll-ui.js分離' },
            { text: '横スワイプ回転\n+ ピンチズーム', sub: 'タッチ操作対応' },
            { text: 'vmin基準\nレスポンシブ', sub: 'フォント統一' },
            { text: 'Gemシェーダー\n探求', sub: 'Sprite→Fresnel orb' },
        ];

        const spacing = (tlRight - tlLeft) / (items.length - 1);

        items.forEach((item, i) => {
            const x = tlLeft + i * spacing;
            const above = i % 2 === 0;

            // Dot
            ctx.beginPath();
            ctx.arc(x, tlY, 7, 0, Math.PI * 2);
            ctx.fillStyle = amber;
            ctx.fill();
            ctx.strokeStyle = '#0a0e1a';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Connector line
            const lineLen = above ? -50 : 50;
            ctx.strokeStyle = 'rgba(74,144,217,0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x, tlY + (above ? -10 : 10));
            ctx.lineTo(x, tlY + lineLen);
            ctx.stroke();

            // Text
            const textY = above ? tlY - 65 : tlY + 70;
            const lines = item.text.split('\n');

            ctx.font = 'bold 16px "Noto Sans JP", sans-serif';
            ctx.fillStyle = dimWhite;
            ctx.textAlign = 'center';
            lines.forEach((line, li) => {
                ctx.fillText(line, x, textY + li * 20);
            });

            // Sub text
            ctx.font = '12px "Noto Sans JP", sans-serif';
            ctx.fillStyle = dimGray;
            ctx.fillText(item.sub, x, textY + lines.length * 20 + 4);
        });

        // Technical decisions box
        const boxY = 460;
        const boxW = 700;
        const boxH = 180;
        const boxX = (W - boxW) / 2;

        // Box background
        ctx.fillStyle = 'rgba(74,144,217,0.08)';
        ctx.strokeStyle = 'rgba(74,144,217,0.2)';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.roundRect(boxX, boxY, boxW, boxH, 8);
        ctx.fill();
        ctx.stroke();

        // Box title
        ctx.font = 'bold 18px "Noto Sans JP", sans-serif';
        ctx.fillStyle = cyan;
        ctx.textAlign = 'left';
        ctx.fillText('技術的決定', boxX + 24, boxY + 35);

        // Box items
        const decisions = [
            'OrbitControls廃止 → ページスクロール非阻害のモバイルファースト設計',
            'vmin単位でフォントサイズ統一（短辺追従）',
            'Gemナビオブジェクトは正三角形配置を採用',
        ];

        ctx.font = '15px "Noto Sans JP", sans-serif';
        ctx.fillStyle = dimWhite;
        decisions.forEach((d, i) => {
            ctx.fillStyle = amber;
            ctx.fillText('▸', boxX + 24, boxY + 70 + i * 35);
            ctx.fillStyle = dimWhite;
            ctx.fillText(d, boxX + 48, boxY + 70 + i * 35);
        });

        // Footer
        ctx.font = '14px "Noto Sans JP", sans-serif';
        ctx.fillStyle = dimGray;
        ctx.textAlign = 'center';
        ctx.fillText('kesson-space devlog — 4エージェントレビュー実施', W / 2, H - 30);

        // Download
        document.getElementById('downloadButton').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'session-002.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
    </script>
</body>
</html>
